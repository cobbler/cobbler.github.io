<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>Command Line Search</title>
   <meta name="author" content="Cobbler development team" />

   <!-- Fonts -->
   <link href='http://fonts.googleapis.com/css?family=Signika|Ovo' rel='stylesheet' type='text/css'>

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

   <!-- Icon -->
   <link rel="icon" type="image/png" href="/images/favicon.png" />

   <!-- JQuery/Bootstrap/custom scripts -->
   <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
   <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
   <script src="/lib/bootstrap/js/bootstrap.min.js"></script>
   <script type="text/javascript" src="/js/search.js"></script>

   <link rel="stylesheet" href="http://code.jquery.com/ui/1.8.18/themes/base/jquery-ui.css" type="text/css" />
   <link href="/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
   <link href="/lib/font/font-awesome.css" rel="stylesheet">

   <!-- Homepage CSS, including overrides for anything above -->
   <link rel="stylesheet" href="/css/style.css" type="text/css" />
</head>
<body>

<!-- ClickTale Top part -->
<script type="text/javascript">
var WRInitTime=(new Date()).getTime();
</script>
<!-- ClickTale end of Top part -->

<div id="wrap">
 <div id="main" class="container-fluid">
  <div class="row-fluid">
   <div class="span12"></div>
   <div class="span10 offset1">
     <div id="socialmedia">
      <a href="https://twitter.com/cobblerista" class="twitter-follow-button" data-show-count="false" data-size="large" data-dnt="true" data-align="right" data-width="95%">Follow @cobblerista</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
     </div>
   </div>
  </div>
  <div class="row-fluid">
   <div class="span10 offset1">
    <div class="navbar">
     <div class="navbar-inner">
      <a class="brand" href="/"><img src="/images/logo-sm.png" /></a>
      <ul class="nav">
       <li class="divider-vertical"></li>
       <li><a href="/about.html" title="About Cobbler"><i class="icon-cloud icon-med"></i> About Cobbler</a></li>
       <li class="divider-vertical"></li>
       <li class="dropdown">
         <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-group icon-med"></i> Community <b class="caret"></b></a>
         <ul class="dropdown-menu">
           <li><a href="/community.html" title="How to Get Help">How to Get Help</a></li>
           <li><a href="/supporters.html" title="Supporters of Cobbler">Supporters</a></li>
         </ul>
       </li>
       <li class="divider-vertical"></li>
       <li class="dropdown">
         <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-book icon-med"></i> Manuals <b class="caret"></b></a>
         <ul class="dropdown-menu">
           <li><a href="/manuals/2.4.0/" title="Version 2.4.0">Version 2.4.0</a></li>
           <li><a href="/manuals/2.2.3/" title="Version 2.2.3">Version 2.2.3</a></li>
         </ul>
       </li>
       <li class="divider-vertical"></li>
       <li class="dropdown">
         <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-github-sign icon-med"></i> Github <b class="caret"></b></a>
         <ul class="dropdown-menu">
          <li><a href="https://github.com/cobbler/cobbler" title="Main Repository" target="_blank">Main Repo</a></li>
          <li><a href="https://github.com/cobbler/cobbler/issues" title="Issues" target="_blank">Issue Tracker</a></li>
          <li><a href="https://github.com/cobbler/cobbler/wiki" title="Github Wiki" target="_blank">Wiki (deprecated)</a></li>
         </ul>
       </li>
       <li class="divider-vertical"></li>
      </ul>
      <!--
      <form class="navbar-search pull-right" onsubmit="return false;">
       <input id="searchbox" type="text" class="search-query" placeholder="Search Manuals" />
      </form>
      -->
     </div>
    </div>
   </div>

  </div>
  <div class="row-fluid">
   <div class="span10 offset1">
   <!-- begin content -->


   <div class="span9">
<ul class="breadcrumb"><li><a href="/manuals">manuals</a> <span class="divider">/</span></li><li><a href="/manuals/2.4.0">2.4.0</a> <span class="divider">/</span></li><li><a href="/manuals/2.4.0/4_-_General_Topics.html">4</a> <span class="divider">/</span></li><li><a href="/manuals/2.4.0/4/2_-_Cobbler_Direct_Commands.html">2</a> <span class="divider">/</span></li><li class="active">Command Line Search</li></ul>
    <h1>Command Line Search</h1>
<p>Command line search can be used to ask questions about your cobbler
configuration, rather than just having to run "cobbler list" or
"cobbler report" and scanning through the results. (The
<a href="Cobbler%20Web%20Interface">Cobbler Web Interface</a> also
supports search/filtering, for those that want to use it, though
that is not documented on this page)</p>

<p>Command line search works on all distro/profile/system/and repo
objects.</p>

<pre><code>cobbler distro find --help
cobbler profile find --help
cobbler system find --help
cobbler repo find --help
</code></pre>

<p>NOTE: Some of these examples are kind of arbitrary. I'm sure you
can think of some more real world examples.</p>

<h2>Examples</h2>

<p>Find what system record has a given mac address.</p>

<pre><code>    cobbler system find --mac=AA:BB:CC:DD:EE:FF
</code></pre>

<p>If anything is using a certain kernel, delete that object and all
it's children (profiles, systems, etc).</p>

<pre><code>    cobbler distro find --kernel=/path/to/kernel | xargs -n1 --replace cobbler distro remove --name={} --recursive
</code></pre>

<p>What profiles use the repo "epel-5-i386-testing" ?</p>

<pre><code>    cobbler profile find --repos=epel-5-i386-testing
</code></pre>

<p>Which profiles are owned by neo AND mranderson?</p>

<pre><code>   cobbler profile find --owners="neo,mranderson"
   # lists need to be comma delimited, like this, with no unneeded spaces
</code></pre>

<p>What systems are set to pass the kernel argument "color=red" ?</p>

<pre><code>   cobbler system find --kopts="color=red"
</code></pre>

<p>What systems are set to pass the kernel argument "color=red" and
"number=5" ?</p>

<pre><code>   cobbler system find --kopts="color=red number=5"
   # space delimited key value pairs
   # key1=value1 key2 key3=value3
</code></pre>

<p>What systems set the kickstart metadata variable of foo to the
value 'bar' ?</p>

<pre><code>   cobbler system find --ksmeta="foo=bar"
   # space delimited key value pairs again
</code></pre>

<p>What systems are set to netboot disabled?</p>

<pre><code>   cobbler system find --netboot-enabled=0
   # note, this also accepts 'false', or 'no'
</code></pre>

<p>For all systems that are assigned to profile "foo" that are set to
netboot disabled, enable them.</p>

<pre><code>   cobbler system find --profile=foo --netboot-enabled=0 | xargs -n1 --replace cobbler system edit --name={} --netboot-enabled=1
   # demonstrates an "AND" query combined with xargs usage.
</code></pre>

<h2>A Note About Types And Wildcards</h2>

<p>Though the cobbler objects behind the scenes store data in various
different formats (booleans, hashes, lists, strings), it all works
fom the command line as text.</p>

<p>If multiple terms are specified to one argument, the search is an
"AND" search.</p>

<p>If multiple parameters are specified, the search is still an "AND"
search.</p>

<p>The find command understands patterns such as "*" and "?". This is
supported using Python's fnmatch.</p>

<p>To learn more:</p>

<pre><code>pydoc fnmatch.fnmatch
</code></pre>

<p>All systems starting with the string foo:</p>

<pre><code>cobbler system find --name="foo*"
</code></pre>

<p>This is rather useful when combined with xargs. This is a rather
tame example, reporting on all systems starting with "TEST".</p>

<pre><code>cobbler system find --name="TEST*" | xargs -n1 --replace cobbler system 
report --name={}
</code></pre>

<p>By extension, you could use this to toggle the --netboot-enabled
systems of machines with certain hostnames, mac addresses, and so
forth, or perform other kinds of wholesale edits (for instance,
deletes, or assigning profiles with certain names to new distros
when upgrading them from F8 to F9, for instance).</p>

<h2>API Usage</h2>

<p>All of this functionality is also exposed through the API</p>

<pre><code>#!/usr/bin/python
import cobbler.api as capi
api_handle = capi.BootAPI()
matches = api_handle.find_profile(name="TEST*",return_list=True)
print matches
</code></pre>

<p>You will find uses of ".find()" throughout the cobbler code that
make use of this behavior.</p>

   </div>
   <div class="span3">
<div class="toc"><ul class="dirtree"><li><a href="/manuals/2.4.0/4/2/1_-_Check.html">1 - Check</a></li><li><a href="/manuals/2.4.0/4/2/2_-_Sync.html">2 - Sync</a></li><li><a href="/manuals/2.4.0/4/2/3_-_Distro_Signatures.html">3 - Distro Signatures</a></li><li><a href="/manuals/2.4.0/4/2/4_-_Import.html">4 - Import</a></li><ul class="dirtree"><li><a href="/manuals/2.4.0/4/2/4/1_-_Import_Notes.html">4.1 - Import Notes</a></li></ul><li><a href="/manuals/2.4.0/4/2/5_-_Reposync.html">5 - Reposync</a></li><li><a href="/manuals/2.4.0/4/2/6_-_Build_ISO.html">6 - Build ISO</a></li><li><a href="/manuals/2.4.0/4/2/7_-_Command_Line_Search.html">7 - Command Line Search</a></li><li><a href="/manuals/2.4.0/4/2/8_-_Replication.html">8 - Replication</a></li><li><a href="/manuals/2.4.0/4/2/9_-_Validate_Kickstart.html">9 - Validate Kickstart</a></li><li><a href="/manuals/2.4.0/4/2/10_-_ACL_Setup.html">10 - ACL Setup</a></li><li><a href="/manuals/2.4.0/4/2/11_-_Dynamic_Settings.html">11 - Dynamic Settings</a></li><li><a href="/manuals/2.4.0/4/2/12_-_Version.html">12 - Version</a></li></ul></div>
   </div>

   <!-- end content -->
   </div>
  </div> <!-- end row-fluid -->
 </div> <!-- end container -->
</div> <!-- end wrap -->

<footer>
  <div class="container pagination-centered">&copy; 2012</div>
</footer>

<!-- Google Analytics -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-27319020-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<!-- Google Analytics end -->

</body>
</html>

